# v2.0 Component Architecture API Reference

## 🎯 Component API Documentation

Complete API reference for the v2.0 UI component architecture, documenting all available components, their interfaces, and usage patterns.

---

## 📋 Table of Contents

1. [Architecture Overview](#architecture-overview)
2. [Component Categories](#component-categories)
3. [Tab Components](#tab-components)
4. [Table Components](#table-components)
5. [Widget Components](#widget-components)
6. [Mixin Components](#mixin-components)
7. [Common Utilities](#common-utilities)
8. [Testing Framework](#testing-framework)
9. [Compatibility Layer](#compatibility-layer)

---

## 🏗️ Architecture Overview

### Component Hierarchy

```
ui.components/
├── tabs/           # Tab-based UI components
├── tables/         # Data table components  
├── widgets/        # Reusable UI widgets
├── mixins/         # Behavior mixins
├── common/         # Common utilities and base classes
├── dialogs/        # Dialog components (planned)
└── testing/        # Testing framework
```

### Base Interfaces

All components implement standard interfaces for consistency:

```python
from ui.components.common import ComponentInterface

class ComponentInterface(ABC):
    """Base interface for all UI components"""
    
    @abstractmethod
    def setup_ui(self) -> None:
        """Initialize the component UI"""
        pass
    
    @abstractmethod
    def connect_signals(self) -> None:
        """Connect component signals and slots"""
        pass
    
    @abstractmethod
    def update_theme(self, theme: Dict[str, Any]) -> None:
        """Update component theme"""
        pass
```

---

## 📂 Component Categories

### Import Patterns

```python
# Category imports (recommended)
from ui.components.tabs import VideoInfoTab, DownloadedVideosTab
from ui.components.tables import VideoTable
from ui.components.widgets import ActionButtonGroup

# Direct imports
from ui.components.tabs.video_info_tab import VideoInfoTab
from ui.components.tables.video_table import VideoTable

# Convenience imports
from ui import VideoInfoTab, VideoTable, MainWindow
```

---

## 📑 Tab Components

### VideoInfoTab

**Location**: `ui.components.tabs.video_info_tab`

```python
from ui.components.tabs import VideoInfoTab

class VideoInfoTab(BaseTab, LanguageSupport, ThemeSupport):
    """Enhanced video information display tab component"""
    
    def __init__(self, parent=None):
        """Initialize video info tab"""
        
    def set_video_info(self, video_data: Dict[str, Any]) -> None:
        """Set video information data"""
        
    def clear_info(self) -> None:
        """Clear displayed video information"""
        
    def update_display_format(self, format_type: str) -> None:
        """Update information display format"""
```

**Usage Example**:
```python
from ui.components.tabs import VideoInfoTab

# Create tab
video_tab = VideoInfoTab()

# Set video data
video_data = {
    'title': 'Video Title',
    'duration': '10:30',
    'quality': '1080p',
    'size': '150MB'
}
video_tab.set_video_info(video_data)
```

### DownloadedVideosTab

**Location**: `ui.components.tabs.downloaded_videos_tab`

```python
from ui.components.tabs import DownloadedVideosTab

class DownloadedVideosTab(BaseTab, LanguageSupport, ThemeSupport):
    """Enhanced downloaded videos management tab component"""
    
    def __init__(self, parent=None):
        """Initialize downloaded videos tab"""
        
    def refresh_downloads(self) -> None:
        """Refresh the downloads list"""
        
    def add_download(self, download_info: Dict[str, Any]) -> None:
        """Add a download to the list"""
        
    def remove_download(self, download_id: str) -> None:
        """Remove a download from the list"""
```

**Usage Example**:
```python
from ui.components.tabs import DownloadedVideosTab

# Create tab
downloads_tab = DownloadedVideosTab()

# Add download
download_info = {
    'id': 'download_123',
    'title': 'Downloaded Video',
    'path': '/path/to/video.mp4',
    'date': '2025-06-03'
}
downloads_tab.add_download(download_info)
```

---

## 📊 Table Components

### VideoTable

**Location**: `ui.components.tables.video_table`

```python
from ui.components.tables import VideoTable

class VideoTable(EnhancedTableWidget, ComponentInterface):
    """Enhanced video data table with advanced features"""
    
    def __init__(self, parent=None):
        """Initialize video table"""
        
    def set_videos(self, videos: List[Dict[str, Any]]) -> None:
        """Set video data in table"""
        
    def add_video(self, video_data: Dict[str, Any]) -> None:
        """Add a video to the table"""
        
    def remove_video(self, video_id: str) -> None:
        """Remove a video from the table"""
        
    def get_selected_videos(self) -> List[Dict[str, Any]]:
        """Get currently selected video data"""
        
    def set_filter(self, filter_criteria: Dict[str, Any]) -> None:
        """Apply filter to table data"""
```

**Usage Example**:
```python
from ui.components.tables import VideoTable

# Create table
video_table = VideoTable()

# Set video data
videos = [
    {'id': '1', 'title': 'Video 1', 'duration': '5:30'},
    {'id': '2', 'title': 'Video 2', 'duration': '8:15'}
]
video_table.set_videos(videos)

# Get selections
selected = video_table.get_selected_videos()
```

---

## 🔧 Widget Components

### ActionButtonGroup

**Location**: `ui.components.widgets.action_button_group`

```python
from ui.components.widgets import ActionButtonGroup

class ActionButtonGroup(QWidget, ComponentInterface):
    """Enhanced action button group with flexible configuration"""
    
    def __init__(self, parent=None):
        """Initialize action button group"""
        
    def add_action(self, action_config: Dict[str, Any]) -> None:
        """Add an action button"""
        
    def remove_action(self, action_id: str) -> None:
        """Remove an action button"""
        
    def set_enabled(self, action_id: str, enabled: bool) -> None:
        """Enable/disable specific action"""
        
    def trigger_action(self, action_id: str) -> None:
        """Programmatically trigger an action"""
```

**Usage Example**:
```python
from ui.components.widgets import ActionButtonGroup

# Create button group
button_group = ActionButtonGroup()

# Add actions
download_action = {
    'id': 'download',
    'text': 'Download',
    'icon': 'download.png',
    'callback': self.handle_download
}
button_group.add_action(download_action)
```

### FilterPopup

**Location**: `ui.components.widgets.filter_popup`

```python
from ui.components.widgets import FilterPopup

class FilterPopup(QWidget, ComponentInterface):
    """Enhanced filter popup with multiple filter types"""
    
    def __init__(self, parent=None):
        """Initialize filter popup"""
        
    def set_filter_options(self, options: Dict[str, List[Any]]) -> None:
        """Set available filter options"""
        
    def get_active_filters(self) -> Dict[str, Any]:
        """Get currently active filters"""
        
    def clear_filters(self) -> None:
        """Clear all active filters"""
```

---

## 🧩 Mixin Components

### LanguageSupport

**Location**: `ui.components.mixins.language_support`

```python
from ui.components.mixins import LanguageSupport

class LanguageSupport:
    """Mixin providing internationalization support"""
    
    def set_language(self, language_code: str) -> None:
        """Set component language"""
        
    def translate_text(self, key: str) -> str:
        """Translate text key"""
        
    def update_translations(self) -> None:
        """Update all component translations"""
```

### ThemeSupport

**Location**: `ui.components.mixins.theme_support`

```python
from ui.components.mixins import ThemeSupport

class ThemeSupport:
    """Mixin providing theme management support"""
    
    def apply_theme(self, theme_config: Dict[str, Any]) -> None:
        """Apply theme configuration"""
        
    def get_theme_property(self, property_name: str) -> Any:
        """Get theme property value"""
        
    def watch_theme_changes(self, callback: Callable) -> None:
        """Register theme change callback"""
```

### TooltipSupport

**Location**: `ui.components.mixins.tooltip_support`

```python
from ui.components.mixins import TooltipSupport

class TooltipSupport:
    """Mixin providing enhanced tooltip functionality"""
    
    def set_enhanced_tooltip(self, widget: QWidget, tooltip_config: Dict) -> None:
        """Set enhanced tooltip with rich content"""
        
    def update_tooltip_theme(self, theme: Dict[str, Any]) -> None:
        """Update tooltip appearance"""
```

---

## 🛠️ Common Utilities

### BaseTab

**Location**: `ui.components.common.base_tab`

```python
from ui.components.common import BaseTab

class BaseTab(QWidget, ComponentInterface, metaclass=QWidgetABCMeta):
    """Base class for all tab components"""
    
    def __init__(self, parent=None):
        """Initialize base tab"""
        
    def setup_ui(self) -> None:
        """Setup basic tab UI structure"""
        
    def connect_signals(self) -> None:
        """Connect common tab signals"""
        
    def set_tab_title(self, title: str) -> None:
        """Set tab title"""
```

### ComponentInterface

**Location**: `ui.components.common.interfaces`

```python
from ui.components.common import ComponentInterface

class ComponentInterface(ABC):
    """Standard interface for all components"""
    
    @abstractmethod
    def setup_ui(self) -> None:
        """Initialize component UI"""
        
    @abstractmethod  
    def connect_signals(self) -> None:
        """Connect signals and slots"""
        
    @abstractmethod
    def update_theme(self, theme: Dict[str, Any]) -> None:
        """Update component theme"""
```

### QWidgetABCMeta

**Location**: `ui.components.common.metaclasses`

```python
from ui.components.common import QWidgetABCMeta

class QWidgetABCMeta(type(QWidget), ABCMeta):
    """Metaclass solving QWidget + ABC conflicts"""
    pass
```

---

## 🧪 Testing Framework

### ComponentTester

**Location**: `ui.components.testing.component_tester`

```python
from ui.components.testing import ComponentTester

class ComponentTester:
    """Comprehensive testing framework for UI components"""
    
    def __init__(self):
        """Initialize component tester"""
        
    def test_component(self, component_class: type) -> TestResult:
        """Test a component class"""
        
    def run_test_suite(self, components: List[type]) -> TestSuite:
        """Run tests on multiple components"""
```

### ResponsivenessTester

**Location**: `ui.components.testing.responsiveness_tester`

```python
from ui.components.testing import ResponsivenessTester

class ResponsivenessTester:
    """Test component responsiveness and performance"""
    
    def test_component_responsiveness(self, component: QWidget) -> Dict[str, Any]:
        """Test component responsiveness"""
        
    def benchmark_component(self, component: QWidget) -> Dict[str, float]:
        """Benchmark component performance"""
```

---

## 🔄 Compatibility Layer

### Legacy Support Functions

**Location**: `ui.compatibility`

```python
import ui.compatibility as compat

# Configuration
compat.configure_global_compatibility(enable_warnings=True)

# Migration guidance  
guidance = compat.get_migration_guidance('quick_start')
troubleshooting = compat.get_migration_guidance('troubleshooting')

# Usage analysis
status = compat.get_compatibility_status()
patterns = compat.analyze_usage_patterns()
```

### Legacy Functions (Deprecated)

**Location**: `ui.__init__`

```python
import ui

# Deprecated legacy functions (show warnings)
tab_class = ui.get_video_info_tab()           # ⚠️ Deprecated
table_class = ui.get_video_table()            # ⚠️ Deprecated
window_class = ui.get_main_window()           # ⚠️ Deprecated
```

---

## 📋 Usage Examples

### Complete Integration Example

```python
# Modern v2.0 approach
from ui.components.tabs import VideoInfoTab, DownloadedVideosTab
from ui.components.tables import VideoTable
from ui.components.widgets import ActionButtonGroup, FilterPopup
from ui.main_window import MainWindow

# Create main window
main_window = MainWindow()

# Create components
video_info_tab = VideoInfoTab()
downloads_tab = DownloadedVideosTab()
video_table = VideoTable()
action_buttons = ActionButtonGroup()

# Configure components
video_info_tab.set_video_info({'title': 'Sample Video'})
downloads_tab.refresh_downloads()
video_table.set_videos([{'id': '1', 'title': 'Video 1'}])

# Add action button
action_buttons.add_action({
    'id': 'download',
    'text': 'Download Selected',
    'callback': lambda: print('Download started!')
})
```

### Testing Example

```python
# Component testing
from ui.components.testing import ComponentTester, ResponsivenessTester
from ui.components.tabs import VideoInfoTab

# Test component
tester = ComponentTester()
result = tester.test_component(VideoInfoTab)
print(f"Test passed: {result.passed}")

# Performance testing
perf_tester = ResponsivenessTester()
tab = VideoInfoTab()
performance = perf_tester.benchmark_component(tab)
print(f"Load time: {performance['load_time']}ms")
```

---

## 📚 Additional Resources

- **Migration Guide**: [v2.0 Migration Guide](./migration/v2.0-ui-architecture-migration.md)
- **Component Examples**: `examples/components/`
- **Testing Documentation**: `docs/testing/component-testing.md`
- **GitHub Repository**: [Project Repository](https://github.com/project/repository)

---

*Last updated: June 2025 | v2.0 Component Architecture API* 